# Ch6: Transaction 交易

* 
## Transaction Fee 交易手續費

交易手續費存在的目的除了是給礦工參與、完成交易運算的誘因，更重要的是提供比特幣網路的**安全性**。且交易費用也讓攻擊者得在網路中考量攻擊成本的花費。挖礦運算和礦工收取的費用與獎勵，會在\[挖礦\]的章節中有更細部的討論。

本章節將介紹如何在典型的交易中包含交易費用。大多數錢包自動計算並包含交易費用；但是如果你以編程介面或那些命令行介面發起交易，則必須手動輸入包含這筆交易所需的費用。

目前交易手續費約略在  0.00001 BTC/per kilobyte。因此，默認情況下、手續費低於0.00001 BTC的交易會被視為免費、只有在Mempool中有空間時才會被轉發出去。

所以總體來講，**手續費**是得**動態調整**的。手續費可以參閱[第三方網站](https://bitcoinfees.earn.com/)做的表格。

![](.gitbook/assets/image%20%2813%29.png)

根據圖片，最佳的手續費場景大概是 80 satoshi/byte。

### **Adding Fees to Transactions 如何向交易添加費用**

交易費用為輸入總和與產出總和之間的差額。從所有輸入中扣除所有輸出後、剩餘的任何餘額都是礦工收取的費用。

## Turing Incompletness 圖靈不完備

簡單來說就是因為發送交易、鎖定貨幣、解鎖貨幣是使用原始的Script語言，意味著裡面沒有複雜的迴圈或是複雜的流量控制功能\(complex flow control capabilities\)、或是其他條件含式。

圖靈不完備意味著腳本語言不會太複雜、且執行時間是可預料的。避免掉了在比特幣網路中出現、無限迴圈等"邏輯上炸彈"，也防止那些拒絕服務的攻擊。

只需要記得，每個交易都由比特幣網路中的完整節點來驗證，有限的語言可以防止將交易驗證的機制被當作系統中的漏洞。

### Stateless Verification

如果你的系統驗證了一個腳本，你可以確保比特幣網路中的其他節點也將認證這個腳本，這意味著有效的交易對每個人都有效，並且每個人都知道這個消息。這種可預測性可以說是比特幣系統中的重要特點。

## Script Construction \(Lock + Unlock\)

比特幣網路中的驗證引擎，只仰賴兩種類型的腳本來驗證交易: 鎖定腳本、解鎖腳本。

鎖定腳本是放在輸出上的支出條件:  scriptPubKey....

解鎖腳本相應的就是解出該筆BTC的權限.....\(略\)

![](.gitbook/assets/image%20%2827%29.png)

## Digital Signatures\(ECDSA\) 數字簽章

數字簽章的功用便是讓你在不洩露私鑰的情形下、依舊擁有使用該筆BTC的能力。在BTC世界中所使用的數字簽章演算法是基於"_Elliptic Curve Digital Signature Algorithm"_，俗稱ECDSA、又名"橢圓曲線數字簽名演算法"。





## 進階交易與腳本運行 Ch7. Advanced Tx and Scripting



  


